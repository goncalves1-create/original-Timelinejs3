
<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Timeline Test - 5 Levels</title>
    <link title="timeline-styles" rel="stylesheet" href="https://cdn.knightlab.com/libs/timeline3/latest/css/timeline.css">
    <style>
        #timeline-embed { width: 100%; height: 800px; }
    </style>
</head>
<body>
    <div id="timeline-embed"></div>

    <script src="https://cdn.knightlab.com/libs/timeline3/latest/js/timeline.js"></script>
    <script type="text/javascript">
// Load data from proxy
function loadTimelineFromProxy() {
    const proxyUrl = 'https://goncalves1-create.github.io/original-Timelinejs3/proxy.html';
    
    // Create iframe to load proxy
    const iframe = document.createElement('iframe');
    iframe.src = proxyUrl;
    iframe.style.display = 'none';
    document.body.appendChild(iframe);
    
    // Listen for data from proxy
    window.addEventListener('message', function(event) {
        if (event.data.type === 'sheetsData') {
            // Process the data and create timeline
            processSheetsData(event.data.data);
        }
    });
}

function processSheetsData(htmlData) {
    // You'll need to parse the HTML and convert to TimelineJS format
    // This is a simplified version - you might need more complex parsing
    console.log('Received data:', htmlData);
    
    // For now, let's create a simple test timeline
    const testData = {
        events: [
            {
                start_date: { year: "2020", month: "1" },
                text: { headline: "Data loaded via proxy", text: "CORS issue solved!" },
                level: 1
            }
        ]
    };
    
    timeline = new TL.Timeline('timeline-embed', testData, {
        language: "pt",
        start_at_end: false,
        zoom_level: 0,
        timenav_height: 100,
        scale_factor: 1
    });
}

// Start loading
loadTimelineFromProxy();
    </script>
</body>
</html>
